//! ludorum-player-assess 0.0.1

(function(e){"use strict";this["ludorum-player-assess"]=e(this.base,this.Sermat,this.ludorum)}).call(this,function e(n,a,r){"use strict";var t=n.raiseIf,o={__package__:"ludorum-player-assess",__name__:"ludorum_player_assess",__init__:e,__dependencies__:[n,a],ludorum:r,__SERMAT__:{include:[n,r]},compare:function(e,a,t,o,s){t=t||new r.players.RandomPlayer({name:"RandomPlayer"}),o=o||[new r.players.RandomPlayer({name:"RandomOpponent"})],s=+s||400;var u=new r.tournaments.Measurement(e,a,o,s),l=new r.tournaments.Measurement(e,t,o,s);return n.Future.all([u.run(),l.run()]).then(function(){var n={};return e.players.forEach(function(e){var r=u.statistics,o=l.statistics;(n[a.name]||(n[a.name]={}))[e]=[r.count({key:"victories",role:e,player:a.name}),r.count({key:"draws",role:e,player:a.name}),r.count({key:"defeats",role:e,player:a.name})],(n[t.name]||(n[t.name]={}))[e]=[o.count({key:"victories",role:e,player:t.name}),o.count({key:"draws",role:e,player:t.name}),o.count({key:"defeats",role:e,player:t.name})]}),n})}},s=o.hypergeometricRule=function(e,n){var a=0,r=[0,0],t=e.map(function(e,t){return r[0]+=e,r[1]+=n[t],a+=e+n[t],e+n[t]}),o=new Array(a+1);r.concat(t).forEach(function(e){for(var n=2;n<=e;n++)o[n]=1+(0|o[n])}),[a].concat(e,n).forEach(function(e){for(var n=2;n<=e;n++)o[n]=(0|o[n])-1});for(var s=1,u=2,l=2;u<=a||l<=a;)s<=1&&u<=a?(o[u]>0&&(s*=Math.pow(u,o[u])),u++):(o[l]<0&&(s*=Math.pow(l,o[l])),l++);return s};return o.fisher2x2=function(e,n,a){t(2!==e.length||2!==n.length,"Contingency table should be 2x2!"),a=isNaN(a)?.05:+a;var r=e[0],o=e[1],u=n[0],l=n[1],i=r+o,c=u+l,m=r+u,f=o+l,p=Math.abs(r/i-u/c),y=Math.min(m,i),_=0;for(r=0;r<=y;r++)u=m-r,l=f-(o=i-r),Math.abs(r/i-u/c)>=p&&(_+=s([r,o],[u,l]));return{p_value:_,comparison:_>a?0:e[0]-n[0]}},o.fisher2x3=function(e,n,a){t(3!==e.length||3!==n.length,"Contingency table should be 2x3!"),a=isNaN(a)?.05:+a;var r,o=e[0],u=e[1],l=e[2],i=n[0],c=n[1],m=n[2],f=o+u+l,p=o+i,y=u+c,_=l+m,h=s([o,u,l],[i,c,m]),d=0;for(o=0;o<=f;o++)for(u=0;u<=f-o;u++)(r=s([o,u,l=f-o-u],[i=p-o,c=y-u,m=_-l]))<=h&&(d+=r);return{p_value:d,comparison:d>a?0:e[0]-n[0]||(e[1]-row[1])/(y+1)}},o});
//# sourceMappingURL=ludorum-player-assess-tag.min.js.map